<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add a Direction Field to an Existing Map — mapDirectionField • oce</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add a Direction Field to an Existing Map — mapDirectionField"><meta name="description" content="Plot a direction field on a existing map, either using arrows,
which is the oceanographic convention, or using wind barbs, which
is a meteorological convention."><meta property="og:description" content="Plot a direction field on a existing map, either using arrows,
which is the oceanographic convention, or using wind barbs, which
is a meteorological convention."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oce</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8-4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/A_oce.html">1. Introduction to Oce</a></li>
    <li><a class="dropdown-item" href="../articles/B_ctd.html">2. Analysis of CTD data</a></li>
    <li><a class="dropdown-item" href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a></li>
    <li><a class="dropdown-item" href="../articles/D_map_projections.html">4. Using map projections</a></li>
    <li><a class="dropdown-item" href="../articles/E_flags.html">5. Dealing with data-quality flags</a></li>
    <li><a class="dropdown-item" href="../articles/F_subclassing.html">6. Subclassing oce objects</a></li>
    <li><a class="dropdown-item" href="../articles/G_altering_defaults.html">7. Altering oce Defaults</a></li>
    <li><a class="dropdown-item" href="../articles/H_tides.html">8. Tidal Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dankelley/oce/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add a Direction Field to an Existing Map</h1>
      <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/map.R" class="external-link"><code>R/map.R</code></a></small>
      <div class="d-none name"><code>mapDirectionField.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plot a direction field on a existing map, either using arrows,
which is the oceanographic convention, or using wind barbs, which
is a meteorological convention.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mapDirectionField</span><span class="op">(</span></span>
<span>  <span class="va">longitude</span>,</span>
<span>  <span class="va">latitude</span>,</span>
<span>  <span class="va">u</span>,</span>
<span>  <span class="va">v</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  length <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  code <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"lwd"</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"fg"</span><span class="op">)</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceDebug"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-longitude-latitude">longitude, latitude<a class="anchor" aria-label="anchor" href="#arg-longitude-latitude"></a></dt>
<dd><p>numeric vectors of the starting points
for arrows, or the locations of grid cells.</p></dd>


<dt id="arg-u-v">u, v<a class="anchor" aria-label="anchor" href="#arg-u-v"></a></dt>
<dd><p>numeric vectors or matrices holding the components of a
vector to be shown as a direction field.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>an indication of the length of the arrows or lines.
For the "arrow" style, this is arrow length in latitude degrees per
unit of velocity.  For the "barb" style, this is the length of all
lines, regardless of the velocity, because in this style velocity
is indicated with barbs and pennants.</p></dd>


<dt id="arg-length">length<a class="anchor" aria-label="anchor" href="#arg-length"></a></dt>
<dd><p>an indication of the size of arrow heads, for "arrow"
style, or of the barbs, for "barb" style. If this is NULL (which is
the default), then 0.05 will be used for the "arrow" style, and 0.2
for the "barb" style.</p></dd>


<dt id="arg-code">code<a class="anchor" aria-label="anchor" href="#arg-code"></a></dt>
<dd><p>an indication of the style of arrow heads or barbs. For
the arrow style, this is a number that is passed to <code><a href="https://rdrr.io/r/graphics/arrows.html" class="external-link">arrows()</a></code>,
with 2 as the default, meaning to draw the arrow as a conventional
vector.  For the wind-barb style, this is the string <code>"barb"</code>.</p></dd>


<dt id="arg-lwd">lwd<a class="anchor" aria-label="anchor" href="#arg-lwd"></a></dt>
<dd><p>a numeric value indicating the width of the line
segments that make up the speed indicators.</p></dd>


<dt id="arg-col">col<a class="anchor" aria-label="anchor" href="#arg-col"></a></dt>
<dd><p>color of the speed indicators.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>an integer specifying whether debugging information is
to be printed during the processing. This is a general parameter that
is used by many <code>oce</code> functions. Generally, setting <code>debug=0</code>
turns off the printing, while higher values suggest that more information
be printed. If one function calls another, it usually reduces the value of
<code>debug</code> first, so that a user can often obtain deeper debugging
by specifying higher <code>debug</code> values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>As noted in the “Description”, there are two styles. 1.
<em>Arrow Style:</em> arrows are drawn from the stated locations in the
direction of the flow defined by the (u,v) vector. This is the
usual convention in oceanographic work. 2. <em>Barb Style:</em> to create
"wind barbs", according to a convention used in meteorological
charts. Unlike arrows, which indicate speed by the arrow length,
barbs indicate speed by angled lines and possibly triangles located
at the upstream end. Note that the meanings of the function
parameters vary across the two styles.</p>
<p>The "arrow" style is quite common in the oceanographic literature.
Arrows point in the direction of the velocity defined by <code>(u,v)</code>,
and the length of those arrows is proportional to the speed,
<code>sqrt(u^2+v^2)</code>.</p>
<p>By contrast, in the "barb" notation, the lines are of equal length
(compared with distance on the ground), with speed being indicated
with barbs. Many sources explain the notation, e.g.
<code>https://www.weather.gov/hfo/windbarbinfo</code>. The lines extend from the
observation longitude and latitude in the direction opposite to the
velocity. Velocities are indicated by barbs, i.e. short line
segments that extend at an angle to the main line and with pennants
(triangles). Speed is given by a combination of pennants and barbs.
A pennant represents 50 speed units, a long barb 10 units, and a
short barb 5 units.  Summing these values gives the speed, rounded
to 5 units.</p>
<p>See “Details” for a comparison of the "arrow" and "barb"
styles for some made-up velocity data.</p>
<p>There are two possibilities for how <code>longitude</code>, <code>latitude</code> are
combined with <code>u</code> and <code>v</code>.</p><ol><li><p>All four are vectors, and the matching is one-to-one. This is
useful for showing velocities at particular individual locations,
as in the “Examples”.</p></li>
<li><p><code>longitude</code> and <code>latitude</code> are vectors, while <code>u</code> and <code>v</code> are
matrices.  In this case, the lengths of <code>longitude</code> and <code>latitude</code>
must equal the number of rows and columns in <code>u</code> and <code>v</code>,
respectively.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>A map must first have been created with <code><a href="mapPlot.html">mapPlot()</a></code>.</p>
<p>Other functions related to maps:
<code><a href="formatPosition.html">formatPosition</a>()</code>,
<code><a href="lonlat2map.html">lonlat2map</a>()</code>,
<code><a href="lonlat2utm.html">lonlat2utm</a>()</code>,
<code><a href="map2lonlat.html">map2lonlat</a>()</code>,
<code><a href="mapArrows.html">mapArrows</a>()</code>,
<code><a href="mapAxis.html">mapAxis</a>()</code>,
<code><a href="mapContour.html">mapContour</a>()</code>,
<code><a href="mapCoordinateSystem.html">mapCoordinateSystem</a>()</code>,
<code><a href="mapGrid.html">mapGrid</a>()</code>,
<code><a href="mapImage.html">mapImage</a>()</code>,
<code><a href="mapLines.html">mapLines</a>()</code>,
<code><a href="mapLocator.html">mapLocator</a>()</code>,
<code><a href="mapLongitudeLatitudeXY.html">mapLongitudeLatitudeXY</a>()</code>,
<code><a href="mapPlot.html">mapPlot</a>()</code>,
<code><a href="mapPoints.html">mapPoints</a>()</code>,
<code><a href="mapPolygon.html">mapPolygon</a>()</code>,
<code><a href="mapScalebar.html">mapScalebar</a>()</code>,
<code><a href="mapText.html">mapText</a>()</code>,
<code><a href="mapTissot.html">mapTissot</a>()</code>,
<code><a href="oceCRS.html">oceCRS</a>()</code>,
<code><a href="oceProject.html">oceProject</a>()</code>,
<code><a href="shiftLongitude.html">shiftLongitude</a>()</code>,
<code><a href="usrLonLat.html">usrLonLat</a>()</code>,
<code><a href="utm2lonlat.html">utm2lonlat</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dan Kelley</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/">oce</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">coastlineWorld</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mapPlot.html">mapPlot</a></span><span class="op">(</span><span class="va">coastlineWorld</span>,</span></span>
<span class="r-in"><span>    border <span class="op">=</span> <span class="st">"black"</span>,</span></span>
<span class="r-in"><span>    col <span class="op">=</span> <span class="st">"grey95"</span>,</span></span>
<span class="r-in"><span>    projection <span class="op">=</span> <span class="st">"+proj=lcc +lat_1=40 +lat_2=60 +lon_0=-60"</span>,</span></span>
<span class="r-in"><span>    longitudelim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">70</span>, <span class="op">-</span><span class="fl">50</span><span class="op">)</span>, latitudelim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Invent wind data for three locations in eastern Canada</span></span></span>
<span class="r-in"><span><span class="va">dataText</span> <span class="op">&lt;-</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">lat,lon,u,v,location</span></span></span>
<span class="r-in"><span><span class="st">44.6476,-63.5728,15,0,Halifax</span></span></span>
<span class="r-in"><span><span class="st">49.5495,-62.9555,20,20,Anticosti Island</span></span></span>
<span class="r-in"><span><span class="st">47.5556,-52.7453,0,55,St. John's"</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">dataText</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Dots at observation locations, for reference</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mapPoints.html">mapPoints</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">lon</span>, <span class="va">data</span><span class="op">$</span><span class="va">lat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Red: arrows that extend downwind from the location</span></span></span>
<span class="r-in"><span><span class="fu">mapDirectionField</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">lon</span>, <span class="va">data</span><span class="op">$</span><span class="va">lat</span>,</span></span>
<span class="r-in"><span>    u <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">u</span>, v <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">v</span>, scale <span class="op">=</span> <span class="fl">0.05</span>,</span></span>
<span class="r-in"><span>    length <span class="op">=</span> <span class="fl">.08</span>, code <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Blue: barbs that extend upwind from the location</span></span></span>
<span class="r-in"><span><span class="fu">mapDirectionField</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">lon</span>, <span class="va">data</span><span class="op">$</span><span class="va">lat</span>,</span></span>
<span class="r-in"><span>    u <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">u</span>, v <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">v</span>, scale <span class="op">=</span> <span class="fl">2</span>, code <span class="op">=</span> <span class="st">"barb"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="mapDirectionField-1.png" alt="" width="700" height="700"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

