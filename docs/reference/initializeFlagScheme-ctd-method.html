<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Establish a data-quality scheme for a ctd object — initializeFlagScheme,ctd-method • oce</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Establish a data-quality scheme for a ctd object — initializeFlagScheme,ctd-method" />
<meta property="og:description" content="This function stores add an item named flagScheme
to the metadata slot of an object inheriting from
ctd. This is a list containing two
items: name and mapping, as provided in the
function arguments.
The purpose is both to document a flag scheme
and to make it so that initializeFlags(),
setFlags() and handleFlags()
can specify flags by
name, as opposed to number. This is a generic function,
that may be specialized to the class of object
(see &amp;#8220;Details&amp;#8221;)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/oce.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/subclassing.html">6. Subclassing oce objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dankelley/oce/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Establish a data-quality scheme for a ctd object</h1>
    <small class="dont-index">Source: <a href='https://github.com/dankelley/oce/blob/master/R/ctd.R'><code>R/ctd.R</code></a></small>
    <div class="hidden name"><code>initializeFlagScheme-ctd-method.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function stores add an item named <code>flagScheme</code>
to the <code>metadata</code> slot of an object inheriting from
<a href='ctd-class.html'>ctd</a>. This is a list containing two
items: <code>name</code> and <code>mapping</code>, as provided in the
function arguments.
The purpose is both to document a flag scheme
and to make it so that <code><a href='initializeFlags.html'>initializeFlags()</a></code>,
<code><a href='setFlags.html'>setFlags()</a></code> and <code><a href='handleFlags.html'>handleFlags()</a></code>
can specify flags by
name, as opposed to number. This is a generic function,
that may be specialized to the class of <code>object</code>
(see &#8220;Details&#8221;).</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for ctd</span>
<span class='fu'><a href='initializeFlagScheme.html'>initializeFlagScheme</a></span>(
  <span class='no'>object</span>,
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>mapping</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>default</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>update</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>debug</span> <span class='kw'>=</span> <span class='fl'>0</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An oce object.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>a character value naming the scheme. If this refers
to a pre-defined scheme, then <code>mapping</code> must not be provided,
because doing so would contradict the pre-defined scheme, defeating
its purpose of providing concreteness and clarity.</p></td>
    </tr>
    <tr>
      <th>mapping</th>
      <td><p>a list of named items describing the mapping from
flag meaning to flag numerical value, e.g <code><a href='https://rdrr.io/r/base/list.html'>list(good=1, bad=2)</a></code>
might be used for a hypothetical class.</p></td>
    </tr>
    <tr>
      <th>default</th>
      <td><p>an integer vector of flag values that are not considered
to be good. If this is not provided, but if <code>name</code> is <code>"argo"</code>,
<code>"BODC"</code>,
<code>"DFO"</code>,
<code>"WHP bottle"</code>, or
<code>"WHP CTD"</code>, then a conservative value will be set automatically,
equal to the list of flag values that designate bad or questionable data.
For example, for <code>name="WHP CTD"</code>, the setting will be
<code><a href='https://rdrr.io/r/base/c.html'>c(1,3,4,5,6,7,9)</a></code>, leaving only value <code>2</code>, which corresponds
with "acceptable" in the notation used for that flag scheme.</p></td>
    </tr>
    <tr>
      <th>update</th>
      <td><p>a logical value indicating whether the scheme provided is
to update an existing scheme.  The default value, <code>FALSE</code>, prevents such
an attempt to alter an existing flag scheme, if one is already embedded
in <code>object</code>.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>an integer set to 0 for quiet action or to 1 for some debugging.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object with the <code>metadata</code> slot containing <code>flagScheme</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The following pre-defined schemes are available (note that the
names are simplified from the phrases used in defining
documentation):</p><ul>
<li><p><code>name="argo"</code> defaults <code>mapping</code> to
OLD (prior to June 10, 2020)</p></li>
</ul><pre><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>not_assessed</span><span class='kw'>=</span><span class='fl'>0</span>, <span class='kw'>passed_all_tests</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>probably_good</span><span class='kw'>=</span><span class='fl'>2</span>,
     <span class='kw'>probably_bad</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>bad</span><span class='kw'>=</span><span class='fl'>4</span>, <span class='kw'>averaged</span><span class='kw'>=</span><span class='fl'>7</span>,
     <span class='kw'>interpolated</span><span class='kw'>=</span><span class='fl'>8</span>, <span class='kw'>missing</span><span class='kw'>=</span><span class='fl'>9</span>)</pre>

<p>NEW (after June 10, 2020)</p><pre><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>not_assessed</span><span class='kw'>=</span><span class='fl'>0</span>, <span class='kw'>passed_all_tests</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>probably_good</span><span class='kw'>=</span><span class='fl'>2</span>,
     <span class='kw'>probably_bad</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>bad</span><span class='kw'>=</span><span class='fl'>4</span>, <span class='kw'>changed</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>not_used_6</span><span class='kw'>=</span><span class='fl'>6</span>, <span class='kw'>not_used_7</span><span class='kw'>=</span><span class='fl'>7</span>,
     <span class='kw'>estimated</span><span class='kw'>=</span><span class='fl'>8</span>, <span class='kw'>missing</span><span class='kw'>=</span><span class='fl'>9</span>)</pre>

<p>See reference 1 for a deeper explanation of the meanings of these codes.</p><ul>
<li><p><code>name="BODC"</code> defaults <code>mapping</code> to</p></li>
</ul><pre><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>no_quality_control</span><span class='kw'>=</span><span class='fl'>0</span>, <span class='kw'>good</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>probably_good</span><span class='kw'>=</span><span class='fl'>2</span>,
     <span class='kw'>probably_bad</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>bad</span><span class='kw'>=</span><span class='fl'>4</span>, <span class='kw'>changed</span><span class='kw'>=</span><span class='fl'>5</span>,
     <span class='kw'>below_detection</span><span class='kw'>=</span><span class='fl'>6</span>, <span class='kw'>in_excess</span><span class='kw'>=</span><span class='fl'>7</span>, <span class='kw'>interpolated</span><span class='kw'>=</span><span class='fl'>8</span>,
     <span class='kw'>missing</span><span class='kw'>=</span><span class='fl'>9</span>)</pre>

<p>See reference 2 for a deeper explanation of the meanings of these codes,
and note that codes <code>A</code> and <code>Q</code> are not provided in
oce.</p><ul>
<li><p><code>name="DFO"</code> defaults <code>mapping</code> to</p></li>
</ul><pre><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>no_quality_control</span><span class='kw'>=</span><span class='fl'>0</span>, <span class='kw'>appears_correct</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>appears_inconsistent</span><span class='kw'>=</span><span class='fl'>2</span>,
     <span class='kw'>doubtful</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>erroneous</span><span class='kw'>=</span><span class='fl'>4</span>, <span class='kw'>changed</span><span class='kw'>=</span><span class='fl'>5</span>,
     <span class='kw'>qc_by_originator</span><span class='kw'>=</span><span class='fl'>8</span>, <span class='kw'>missing</span><span class='kw'>=</span><span class='fl'>9</span>)</pre>

<p>See reference 3 for a deeper explanation of the meanings of these codes.</p><ul>
<li><p><code>name="WHP bottle"</code> defaults <code>mapping</code> to</p></li>
</ul><pre><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>no_information</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>no_problems_noted</span><span class='kw'>=</span><span class='fl'>2</span>, <span class='kw'>leaking</span><span class='kw'>=</span><span class='fl'>3</span>,
     <span class='kw'>did_not_trip</span><span class='kw'>=</span><span class='fl'>4</span>, <span class='kw'>not_reported</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>discrepency</span><span class='kw'>=</span><span class='fl'>6</span>,
     <span class='kw'>unknown_problem</span><span class='kw'>=</span><span class='fl'>7</span>, <span class='kw'>did_not_trip</span><span class='kw'>=</span><span class='fl'>8</span>, <span class='kw'>no_sample</span><span class='kw'>=</span><span class='fl'>9</span>)</pre>

<p>See reference 4 for a deeper explanation of the meanings of these codes.</p><ul>
<li><p><code>name="WHP CTD"</code> defaults <code>mapping</code> to</p></li>
</ul><pre><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>not_calibrated</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>acceptable</span><span class='kw'>=</span><span class='fl'>2</span>, <span class='kw'>questionable</span><span class='kw'>=</span><span class='fl'>3</span>,
    <span class='kw'>bad</span><span class='kw'>=</span><span class='fl'>4</span>, <span class='kw'>not_reported</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>interpolated</span><span class='kw'>=</span><span class='fl'>6</span>,
    <span class='kw'>despiked</span><span class='kw'>=</span><span class='fl'>7</span>, <span class='kw'>missing</span><span class='kw'>=</span><span class='fl'>9</span>)</pre>

<p>See reference 4 for a deeper explanation of the meanings of these codes.</p>
    <h2 class="hasAnchor" id="caution"><a class="anchor" href="#caution"></a>Caution</h2>

    

<p>This function was added in early May, 2018, and is likely to undergo
changes until the autumn of that year.  Use with caution.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ol>
<li><p>The codes for <code>"argo"</code> are derived from information in Table 4.1
of Wong, Annie, Robert Keeley, Thierry Carval, and Argo Data Management Team
(8 January 2020), "Argo Quality Control Manual for CTD and Trajectory Data, Version 3.3,"
available at <a href='https://archimer.ifremer.fr/doc/00228/33951/'>https://archimer.ifremer.fr/doc/00228/33951/</a>
as of June 2020.</p></li>
<li><p>The codes for <code>"BODC"</code> are defined at
http://seadatanet.maris2.nl/v_bodc_vocab_v2/browse.asp?order=conceptid&amp;formname=search&amp;screen=0&amp;lib=l20</p></li>
<li><p>The codes for <code>"DFO"</code> are defined at
http://www.dfo-mpo.gc.ca/science/data-donnees/code/list/014-eng.html</p></li>
<li><p>The codes for <code>"WHP CTD"</code> and <code>"WHP bottle"</code> are defined at
https://www.nodc.noaa.gov/woce/woce_v3/wocedata_1/whp/exchange/exchange_format_desc.htm</p></li>
</ol>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other functions relating to data-quality flags: 
<code><a href='defaultFlags.html'>defaultFlags</a>()</code>,
<code><a href='handleFlags-adp-method.html'>handleFlags,adp-method</a></code>,
<code><a href='handleFlags-argo-method.html'>handleFlags,argo-method</a></code>,
<code><a href='handleFlags-ctd-method.html'>handleFlags,ctd-method</a></code>,
<code><a href='handleFlags-oce-method.html'>handleFlags,oce-method</a></code>,
<code><a href='handleFlags-section-method.html'>handleFlags,section-method</a></code>,
<code><a href='handleFlags.html'>handleFlags</a>()</code>,
<code><a href='initializeFlagScheme-oce-method.html'>initializeFlagScheme,oce-method</a></code>,
<code><a href='initializeFlagScheme-section-method.html'>initializeFlagScheme,section-method</a></code>,
<code><a href='initializeFlagSchemeInternal.html'>initializeFlagSchemeInternal</a>()</code>,
<code><a href='initializeFlagScheme.html'>initializeFlagScheme</a>()</code>,
<code><a href='initializeFlags-adp-method.html'>initializeFlags,adp-method</a></code>,
<code><a href='initializeFlags-oce-method.html'>initializeFlags,oce-method</a></code>,
<code><a href='initializeFlagsInternal.html'>initializeFlagsInternal</a>()</code>,
<code><a href='initializeFlags.html'>initializeFlags</a>()</code>,
<code><a href='setFlags-adp-method.html'>setFlags,adp-method</a></code>,
<code><a href='setFlags-ctd-method.html'>setFlags,ctd-method</a></code>,
<code><a href='setFlags-oce-method.html'>setFlags,oce-method</a></code>,
<code><a href='setFlags.html'>setFlags</a>()</code></p>
<p>Other things related to ctd data: 
<code><a href='CTD_BCD2014666_008_1_DN.ODF.gz.html'>CTD_BCD2014666_008_1_DN.ODF.gz</a></code>,
<code><a href='sub-sub-ctd-method.html'>[[,ctd-method</a></code>,
<code>[[&lt;-,ctd-method</code>,
<code><a href='as.ctd.html'>as.ctd</a>()</code>,
<code><a href='cnvName2oceName.html'>cnvName2oceName</a>()</code>,
<code><a href='ctd-class.html'>ctd-class</a></code>,
<code><a href='ctd.cnv.html'>ctd.cnv</a></code>,
<code><a href='ctdDecimate.html'>ctdDecimate</a>()</code>,
<code><a href='ctdFindProfiles.html'>ctdFindProfiles</a>()</code>,
<code><a href='ctdRaw.html'>ctdRaw</a></code>,
<code><a href='ctdTrim.html'>ctdTrim</a>()</code>,
<code><a href='ctd.html'>ctd</a></code>,
<code><a href='d200321-001.ctd.html'>d200321-001.ctd</a></code>,
<code><a href='d201211_0011.cnv.html'>d201211_0011.cnv</a></code>,
<code><a href='handleFlags-ctd-method.html'>handleFlags,ctd-method</a></code>,
<code><a href='initialize-ctd-method.html'>initialize,ctd-method</a></code>,
<code><a href='oceNames2whpNames.html'>oceNames2whpNames</a>()</code>,
<code><a href='oceUnits2whpUnits.html'>oceUnits2whpUnits</a>()</code>,
<code><a href='plot-ctd-method.html'>plot,ctd-method</a></code>,
<code><a href='plotProfile.html'>plotProfile</a>()</code>,
<code><a href='plotScan.html'>plotScan</a>()</code>,
<code><a href='plotTS.html'>plotTS</a>()</code>,
<code><a href='read.ctd.itp.html'>read.ctd.itp</a>()</code>,
<code><a href='read.ctd.odf.html'>read.ctd.odf</a>()</code>,
<code><a href='read.ctd.odv.html'>read.ctd.odv</a>()</code>,
<code><a href='read.ctd.sbe.html'>read.ctd.sbe</a>()</code>,
<code><a href='read.ctd.woce.other.html'>read.ctd.woce.other</a>()</code>,
<code><a href='read.ctd.woce.html'>read.ctd.woce</a>()</code>,
<code><a href='read.ctd.html'>read.ctd</a>()</code>,
<code><a href='setFlags-ctd-method.html'>setFlags,ctd-method</a></code>,
<code><a href='subset-ctd-method.html'>subset,ctd-method</a></code>,
<code><a href='summary-ctd-method.html'>summary,ctd-method</a></code>,
<code><a href='woceNames2oceNames.html'>woceNames2oceNames</a>()</code>,
<code><a href='woceUnit2oceUnit.html'>woceUnit2oceUnit</a>()</code>,
<code><a href='write.ctd.html'>write.ctd</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


