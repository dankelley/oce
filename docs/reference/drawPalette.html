<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Draw a palette, leaving margins suitable for accompanying plot — drawPalette • oce</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Draw a palette, leaving margins suitable for accompanying plot — drawPalette"><meta property="og:description" content="In the normal use, drawPalette() draws an image palette near the
right-hand side of the plotting device, and then adjusts the global margin
settings in such a way as to cause the next plot to appear (with much larger
width) to the left of the palette. The function can also be used, if
zlim is not provided, to adjust the margin without drawing anything;
this is useful in lining up the x axes of a stack of plots, some some of
which will have palettes and others not."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7-7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A_oce.html">1. Introduction to Oce</a>
    </li>
    <li>
      <a href="../articles/B_ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/D_map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/E_flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/F_subclassing.html">6. Subclassing oce objects</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dankelley/oce/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Draw a palette, leaving margins suitable for accompanying plot</h1>
    <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/imagep.R" class="external-link"><code>R/imagep.R</code></a></small>
    <div class="hidden name"><code>drawPalette.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>In the normal use, <code>drawPalette()</code> draws an image palette near the
right-hand side of the plotting device, and then adjusts the global margin
settings in such a way as to cause the next plot to appear (with much larger
width) to the left of the palette. The function can also be used, if
<code>zlim</code> is not provided, to adjust the margin without drawing anything;
this is useful in lining up the x axes of a stack of plots, some some of
which will have palettes and others not.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">drawPalette</span><span class="op">(</span>
  <span class="va">zlim</span>,
  zlab <span class="op">=</span> <span class="st">""</span>,
  <span class="va">breaks</span>,
  <span class="va">col</span>,
  <span class="va">colormap</span>,
  <span class="va">mai</span>,
  cex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"cex"</span><span class="op">)</span>,
  pos <span class="op">=</span> <span class="fl">4</span>,
  las <span class="op">=</span> <span class="fl">0</span>,
  labels <span class="op">=</span> <span class="cn">NULL</span>,
  at <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">levels</span>,
  drawContours <span class="op">=</span> <span class="cn">FALSE</span>,
  plot <span class="op">=</span> <span class="cn">TRUE</span>,
  fullpage <span class="op">=</span> <span class="cn">FALSE</span>,
  drawTriangles <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">axisPalette</span>,
  <span class="va">tformat</span>,
  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceDebug"</span><span class="op">)</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>zlim</dt>
<dd><p>two-element vector containing the lower and upper limits of z.
This may also be a vector of any length exceeding 1, in which case its range
is used.</p></dd>


<dt>zlab</dt>
<dd><p>label for the palette scale.</p></dd>


<dt>breaks</dt>
<dd><p>optional numeric vector of the z values for breaks in the color scheme.
If <code>colormap</code> is provided, it takes precedence over <code>breaks</code> and <code>col</code>.</p></dd>


<dt>col</dt>
<dd><p>optional argument, either a vector of colors corresponding to the breaks, of length
1 less than the number of breaks, or a function specifying colors.
If <code>col</code> is not provided, and if <code>colormap</code> is also not provided, then <code>col</code>
defaults to <code><a href="oceColorsViridis.html">oceColorsViridis()</a></code>.
If <code>colormap</code> is provided, it takes precedence over <code>breaks</code> and <code>col</code>.</p></dd>


<dt>colormap</dt>
<dd><p>an optional color map as created by <code><a href="colormap.html">colormap()</a></code>.
If <code>colormap</code> is provided, it takes precedence over <code>breaks</code> and <code>col</code>.</p></dd>


<dt>mai</dt>
<dd><p>margins for palette, as defined in the usual way; see
<code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par()</a></code>.  If not given, reasonable values are inferred from the
existence of a non-blank <code>zlab</code>.</p></dd>


<dt>cex</dt>
<dd><p>numeric character expansion value for text labels</p></dd>


<dt>pos</dt>
<dd><p>an integer indicating the location of the palette within the
plotting area, 1 for near the bottom, 2 for near the left-hand side, 3 for
near the top side, and 4 (the default) for near the right-hand side.</p></dd>


<dt>las</dt>
<dd><p>optional argument, passed to <code><a href="https://rdrr.io/r/graphics/axis.html" class="external-link">axis()</a></code>, to control the orientation
of numbers along the axis. As explained in the help for <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par()</a></code>, the
meaning of <code>las</code> is as follows: <code>las=0</code> (the default) means to put labels
parallel to the axis, <code>las=1</code> means horizontal (regardless of
axis orientation), <code>las=2</code> means perpendicular to the axis,
and <code>las=3</code> means to vertical (regardless of axis orientation).  Note that
the automatic computation of margin spacing parameter <code>mai</code>
assumes that <code>las=0</code>, and so for other cases, the user may need to
specify the <code>mai</code> argument directly.</p></dd>


<dt>labels</dt>
<dd><p>optional vector of labels for ticks on palette axis (must
correspond with <code>at</code>)</p></dd>


<dt>at</dt>
<dd><p>optional vector of positions for the <code>label</code>s</p></dd>


<dt>levels</dt>
<dd><p>optional contour levels, in preference to <code>breaks</code>
values, to be added to the image if <code>drawContours</code> is <code>TRUE</code>.</p></dd>


<dt>drawContours</dt>
<dd><p>logical value indicating whether to draw contours on the
palette, at the color breaks.</p></dd>


<dt>plot</dt>
<dd><p>logical value indicating whether to plot the palette, the
default, or whether to just alter the margins to make space for where the
palette would have gone.  The latter case may be useful in lining up plots,
as in example 1 of “Examples”.</p></dd>


<dt>fullpage</dt>
<dd><p>logical value indicating whether to draw the palette filling
the whole plot width (apart from <code>mai</code>, of course).  This can be
helpful if the palette panel is to be created with <code><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout()</a></code>, as
illustrated in the “Examples”.</p></dd>


<dt>drawTriangles</dt>
<dd><p>logical value indicating whether to draw triangles on
the top and bottom of the palette.  If a single value is provided, it applies
to both ends of the palette.  If a pair is provided, the first refers to the
lower range of the palette, and the second to the upper range.</p></dd>


<dt>axisPalette</dt>
<dd><p>optional replacement function for <code><a href="https://rdrr.io/r/graphics/axis.html" class="external-link">axis()</a></code>, e.g.
for exponential notation on large or small values.</p></dd>


<dt>tformat</dt>
<dd><p>optional format for axis labels, if the variable is a time
type (ignored otherwise).</p></dd>


<dt>debug</dt>
<dd><p>a flag that turns on debugging.  Set to 1 to get a moderate
amount of debugging information, or to 2 to get more.</p></dd>


<dt>...</dt>
<dd><p>optional arguments passed to plotting functions.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>None.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The plot positioning is done entirely with margins, not with
<code>par(mfrow)</code> or other R schemes for multi-panel plots.  This means that
the user is free to use those schemes without worrying about nesting or
conflicts.</p>
    </div>
    <div id="use-with-multi-panel-plots">
    <h2>Use with multi-panel plots</h2>
    <p>An important consequence of the margin
adjustment is that multi-panel plots require that the initial margin be
stored prior to the first call to <code>drawPalette()</code>, and reset after each
palette-plot pair.  This method is illustrated in “Examples”.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>This is used by <code><a href="imagep.html">imagep()</a></code>.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Dan Kelley, with help from Clark Richards</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/" class="external-link">oce</a></span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mgp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceMgp"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## 1. A three-panel plot</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">omar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span>                 <span class="co"># save initial margin</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## 1a. top panel: simple case with Viridis scheme</span></span>
<span class="r-in"><span class="fu">drawPalette</span><span class="op">(</span>zlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="oceColorsViridis.html">oce.colorsViridis</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, col<span class="op">=</span><span class="fu"><a href="oceColorsViridis.html">oce.colorsViridis</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,pch<span class="op">=</span><span class="fl">20</span>,cex<span class="op">=</span><span class="fl">3</span>,xlab<span class="op">=</span><span class="st">'x'</span>, ylab<span class="op">=</span><span class="st">'y'</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="va">omar</span><span class="op">)</span>                      <span class="co"># reset margin</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## 1b. middle panel: colormap</span></span>
<span class="r-in"><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="colormap.html">colormap</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"gmt_globe"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">drawPalette</span><span class="op">(</span>colormap<span class="op">=</span><span class="va">cm</span><span class="op">)</span></span>
<span class="r-in"><span class="va">icol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">cm</span><span class="op">$</span><span class="va">col</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">icol</span>, <span class="va">cm</span><span class="op">$</span><span class="va">breaks</span><span class="op">[</span><span class="va">icol</span><span class="op">]</span>, pch<span class="op">=</span><span class="fl">20</span>, cex<span class="op">=</span><span class="fl">2</span>, col<span class="op">=</span><span class="va">cm</span><span class="op">$</span><span class="va">col</span>,</span>
<span class="r-in">     xlab<span class="op">=</span><span class="st">"Palette index"</span>, ylab<span class="op">=</span><span class="st">"Palette breaks"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="va">omar</span><span class="op">)</span>                      <span class="co"># reset margin</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## 1c. bottom panel: space for palette (to line up graphs)</span></span>
<span class="r-in"><span class="fu">drawPalette</span><span class="op">(</span>plot<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, col<span class="op">=</span><span class="fu"><a href="oceColorsViridis.html">oce.colorsViridis</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,pch<span class="op">=</span><span class="fl">20</span>,cex<span class="op">=</span><span class="fl">3</span>,xlab<span class="op">=</span><span class="st">'x'</span>, ylab<span class="op">=</span><span class="st">'y'</span><span class="op">)</span></span>
<span class="r-plt img"><img src="drawPalette-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="va">omar</span><span class="op">)</span>                      <span class="co"># reset margin</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># 2. Use layout to mimic the action of imagep(), with the width</span></span>
<span class="r-in"><span class="co"># of the palette region being 14 percent of figure width.</span></span>
<span class="r-in"><span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">0.14</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,nrow<span class="op">=</span><span class="fl">1</span><span class="op">)</span>, widths<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">d</span>,<span class="va">d</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/image.html" class="external-link">image</a></span><span class="op">(</span><span class="va">volcano</span>, col<span class="op">=</span><span class="fu"><a href="oceColorsViridis.html">oce.colorsViridis</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, zlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/contour.html" class="external-link">contour</a></span><span class="op">(</span><span class="va">volcano</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">drawPalette</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">200</span><span class="op">)</span>, fullpage<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="va">oce.colorsViridis</span><span class="op">)</span></span>
<span class="r-plt img"><img src="drawPalette-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

