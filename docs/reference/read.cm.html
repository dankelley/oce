<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Read a cm File — read.cm • oce</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read a cm File — read.cm"><meta name="description" content="Read a current-meter data file, producing a cm object."><meta property="og:description" content="Read a current-meter data file, producing a cm object."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oce</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8-4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/A_oce.html">1. Introduction to Oce</a></li>
    <li><a class="dropdown-item" href="../articles/B_ctd.html">2. Analysis of CTD data</a></li>
    <li><a class="dropdown-item" href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a></li>
    <li><a class="dropdown-item" href="../articles/D_map_projections.html">4. Using map projections</a></li>
    <li><a class="dropdown-item" href="../articles/E_flags.html">5. Dealing with data-quality flags</a></li>
    <li><a class="dropdown-item" href="../articles/F_subclassing.html">6. Subclassing oce objects</a></li>
    <li><a class="dropdown-item" href="../articles/G_altering_defaults.html">7. Altering oce Defaults</a></li>
    <li><a class="dropdown-item" href="../articles/H_tides.html">8. Tidal Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dankelley/oce/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Read a cm File</h1>
      <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/cm.R" class="external-link"><code>R/cm.R</code></a></small>
      <div class="d-none name"><code>read.cm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Read a current-meter data file, producing a <a href="cm-class.html">cm</a> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read.cm</span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">to</span>,</span>
<span>  by <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  tz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceTz"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s4"</span><span class="op">)</span>,</span>
<span>  longitude <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  latitude <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceDebug"</span><span class="op">)</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"latin1"</span>,</span>
<span>  monitor <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">processingLog</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>a connection or a character string giving the name of the file to
load.</p></dd>


<dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>index number of the first measurement to be read, or the time of
that measurement, as created with <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct()</a></code> (hint: use
<code>tz="UTC"</code>).</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>indication of the last measurement to read, in a format matching that
of <code>from</code>.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>an indication of the stride length to use while walking through the
file. If this is an integer, then <code>by-1</code> measurements are skipped between
each pair of profiles that is read. This may not make much sense, if the data
are not equi-spaced in time.  If <code>by</code> is a string representing a time
interval, in colon-separated format, then this interval is divided by the
sampling interval, to get the stride length. <em>BUG:</em> if the data are not
equi-spaced, then odd results will occur.</p></dd>


<dt id="arg-tz">tz<a class="anchor" aria-label="anchor" href="#arg-tz"></a></dt>
<dd><p>character string indicating time zone to be assumed in the data.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>character string indicating type of file (ignored at present).</p></dd>


<dt id="arg-longitude">longitude<a class="anchor" aria-label="anchor" href="#arg-longitude"></a></dt>
<dd><p>optional signed number indicating the longitude in degrees
East.</p></dd>


<dt id="arg-latitude">latitude<a class="anchor" aria-label="anchor" href="#arg-latitude"></a></dt>
<dd><p>optional signed number indicating the latitude in degrees North.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>a flag that turns on debugging.  The value indicates the depth
within the call stack to which debugging applies.</p></dd>


<dt id="arg-encoding">encoding<a class="anchor" aria-label="anchor" href="#arg-encoding"></a></dt>
<dd><p>a character value that indicates the encoding to be used for
this data file, if it is textual.  The default value for most functions is
<code>"latin1"</code>, which seems to be suitable for files containing text written in
English and French.</p></dd>


<dt id="arg-monitor">monitor<a class="anchor" aria-label="anchor" href="#arg-monitor"></a></dt>
<dd><p>ignored.</p></dd>


<dt id="arg-processinglog">processingLog<a class="anchor" aria-label="anchor" href="#arg-processinglog"></a></dt>
<dd><p>if provided, the action item to be stored in the log.  This
parameter is typically only provided for internal calls; the default that it
provides is better for normal calls by a user.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <a href="cm-class.html">cm</a> object.</p>
<p>The <code>data</code> slot will contain all the data in the file, with names
determined from the tokens in line 3 in that file, passed through
<code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names()</a></code>, except that
<code>Vnorth</code> is renamed <code>v</code> (after conversion from cm/s to m/s),
<code>Veast</code> is renamed <code>u</code> (after conversion from cm/s to m/s),
<code>Cond</code> is renamed <code>conductivity</code>,
<code>T.Temp</code> is renamed <code>temperature</code>
and
<code>Sal</code> is renamed <code>salinity</code>, and a new
column named <code>time</code> (a POSIX time) is constructed
from the information in the file header, and another named
<code>pressure</code> is constructed from the column named <code>Depth</code>.
At least in the single file studied in the creation of this function,
there are some columns that are unnamed in line 3 of the header;
these yield data items with names <code>X</code>, <code>X.1</code>, etc.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There function has been tested on only a single file, and the data-scanning
algorithm was based on visual inspection of that file.  Whether it will work
generally is an open question. It should be noted that the sample file had
several odd characteristics, some of which are listed below.</p><ul><li><p>file contained two columns named <code>"Cond"</code>, which was guessed
to stand for conductivity. Since only the first contained data, the second was
ignored, but this may not be the case for all files.</p></li>
<li><p>The unit for <code>"Cond"</code> was stated in the file to be <code>"mS"</code>,
which makes no sense, so the unit was assumed to be mS/cm.</p></li>
<li><p>The file contained a column named <code>"T-Temp"</code>, which is not
something the author has seen in his career. It was assumed to stand for
in-situ temperature.</p></li>
<li><p>The file contained a column named <code>"Depth"</code>, which is not something
an instrument can measure. Presumably it was calculated from pressure (with
what atmospheric offset, though?) and so pressure was inferred from it using
<code><a href="swPressure.html">swPressure()</a></code>.</p></li>
<li><p>The file contained several columns that lacked names. These were ignored.</p></li>
<li><p>The file contained several columns that seem to be derived from the
actual measured data, such as <code>"Speed"</code>, <code>"Dir"</code>, <code>"N-S Dist"</code>,
etc. These are ignored.</p></li>
<li><p>The file contained several columns that were basically a mystery to the
author, e.g. <code>"Hx"</code>, <code>"Hy"</code>, <code>"Vref"</code>, etc. These were ignored.</p></li>
</ul><p>Based on such considerations, <code>read.cm()</code> reads only the columns that
were reasonably well-understood based on the sample file. Users who need more
columns should contact the author. And a user who could produce a document
explaining the data format would be especially appreciated!</p>
    </div>
    <div class="section level2">
    <h2 id="historical-note">Historical note<a class="anchor" aria-label="anchor" href="#historical-note"></a></h2>


<p>Prior to late July, 2016, the direction of current flow was stored in the
return value, but it is no longer stored, since it can be derived from the
<code>u</code> and <code>v</code> values.</p>
    </div>
    <div class="section level2">
    <h2 id="changes">Changes<a class="anchor" aria-label="anchor" href="#changes"></a></h2>


<ul><li><p>On 2023-02-09 an item named <code>north</code> was added to the <code>metadata</code> slot.  This
is initialized to <code>"magnetic"</code> by <code>read.cm()</code>, but this is really just a
guess, and users ought to consider using <code><a href="applyMagneticDeclination.html">applyMagneticDeclination()</a></code> to take
magnetic declination into account.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="sample-of-usage">Sample of Usage<a class="anchor" aria-label="anchor" href="#sample-of-usage"></a></h2>


<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/">oce</a></span><span class="op">)</span></span>
<span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.oce.html">read.oce</a></span><span class="op">(</span><span class="st">"cm_interocean_0811786.s4a.tab"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cm</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cm</span><span class="op">)</span></span></code></pre></div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other things related to cm data:
<code><a href="sub-sub-cm-method.html">[[,cm-method</a></code>,
<code>[[&lt;-,cm-method</code>,
<code><a href="applyMagneticDeclination-cm-method.html">applyMagneticDeclination,cm-method</a></code>,
<code><a href="as.cm.html">as.cm</a>()</code>,
<code><a href="cm.html">cm</a></code>,
<code><a href="cm-class.html">cm-class</a></code>,
<code><a href="plot-cm-method.html">plot,cm-method</a></code>,
<code><a href="rotateAboutZ.html">rotateAboutZ</a>()</code>,
<code><a href="subset-cm-method.html">subset,cm-method</a></code>,
<code><a href="summary-cm-method.html">summary,cm-method</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dan Kelley</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

