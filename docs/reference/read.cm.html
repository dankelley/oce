<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Read a CM file — read.cm • oce</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Read a CM file — read.cm"><meta property="og:description" content="Read a current-meter data file, producing a cm object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A_oce.html">1. Introduction to Oce</a>
    </li>
    <li>
      <a href="../articles/B_ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/D_map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/E_flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/F_subclassing.html">6. Subclassing oce objects</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dankelley/oce/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read a CM file</h1>
    <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/cm.R" class="external-link"><code>R/cm.R</code></a></small>
    <div class="hidden name"><code>read.cm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read a current-meter data file, producing a <a href="cm-class.html">cm</a> object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">read.cm</span><span class="op">(</span>
  <span class="va">file</span>,
  from <span class="op">=</span> <span class="fl">1</span>,
  <span class="va">to</span>,
  by <span class="op">=</span> <span class="fl">1</span>,
  tz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceTz"</span><span class="op">)</span>,
  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s4"</span><span class="op">)</span>,
  longitude <span class="op">=</span> <span class="cn">NA</span>,
  latitude <span class="op">=</span> <span class="cn">NA</span>,
  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceDebug"</span><span class="op">)</span>,
  monitor <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">processingLog</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>file</dt>
<dd><p>a connection or a character string giving the name of the file to
load.</p></dd>
<dt>from</dt>
<dd><p>index number of the first measurement to be read, or the time of
that measurement, as created with <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct()</a></code> (hint: use
<code>tz="UTC"</code>).</p></dd>
<dt>to</dt>
<dd><p>indication of the last measurement to read, in a format matching that
of <code>from</code>.</p></dd>
<dt>by</dt>
<dd><p>an indication of the stride length to use while walking through the
file. If this is an integer, then <code>by-1</code> measurements are skipped between
each pair of profiles that is read. This may not make much sense, if the data
are not equi-spaced in time.  If <code>by</code> is a string representing a time
interval, in colon-separated format, then this interval is divided by the
sampling interval, to get the stride length. <em>BUG:</em> if the data are not
equi-spaced, then odd results will occur.</p></dd>
<dt>tz</dt>
<dd><p>character string indicating time zone to be assumed in the data.</p></dd>
<dt>type</dt>
<dd><p>character string indicating type of file (ignored at present).</p></dd>
<dt>longitude</dt>
<dd><p>optional signed number indicating the longitude in degrees
East.</p></dd>
<dt>latitude</dt>
<dd><p>optional signed number indicating the latitude in degrees North.</p></dd>
<dt>debug</dt>
<dd><p>a flag that turns on debugging.  The value indicates the depth
within the call stack to which debugging applies.</p></dd>
<dt>monitor</dt>
<dd><p>ignored.</p></dd>
<dt>processingLog</dt>
<dd><p>if provided, the action item to be stored in the log.  This
parameter is typically only provided for internal calls; the default that it
provides is better for normal calls by a user.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <a href="cm-class.html">cm</a> object.
The <code>data</code> slot will contain all the data in the file, with names
determined from the tokens in line 3 in that file, passed through
<code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names()</a></code>, except that
<code>Vnorth</code> is renamed <code>v</code> (after conversion from cm/s to m/s),
<code>Veast</code> is renamed <code>u</code> (after conversion from cm/s to m/s),
<code>Cond</code> is renamed <code>conductivity</code>,
<code>T.Temp</code> is renamed <code>temperature</code>and
<code>Sal</code> is renamed <code>salinity</code>, and a new
column named <code>time</code> (a POSIX time) is constructed
from the information in the file header, and another named
<code>pressure</code> is constructed from the column named <code>Depth</code>.
At least in the single file studied in the creation of this function,
there are some columns that are unnamed in line 3 of the header;
these yield data items with names <code>X</code>, <code>X.1</code>, etc.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There function has been tested on only a single file, and the data-scanning
algorithm was based on visual inspection of that file.  Whether it will work
generally is an open question. It should be noted that the sample file had
several odd characteristics, some of which are listed below.</p><ul><li><p>file contained two columns named <code>"Cond"</code>, which was guessed
to stand for conductivity. Since only the first contained data, the second was
ignored, but this may not be the case for all files.</p></li>
<li><p>The unit for <code>"Cond"</code> was stated in the file to be <code>"mS"</code>,
which makes no sense, so the unit was assumed to be mS/cm.</p></li>
<li><p>The file contained a column named <code>"T-Temp"</code>, which is not
something the author has seen in his career. It was assumed to stand for
in-situ temperature.</p></li>
<li><p>The file contained a column named <code>"Depth"</code>, which is not something
an instrument can measure. Presumably it was calculated from pressure (with
what atmospheric offset, though?) and so pressure was inferred from it using
<code><a href="swPressure.html">swPressure()</a></code>.</p></li>
<li><p>The file contained several columns that lacked names. These were ignored.</p></li>
<li><p>The file contained several columns that seem to be derived from the
actual measured data, such as <code>"Speed"</code>, <code>"Dir"</code>, <code>"N-S Dist"</code>,
etc. These are ignored.</p></li>
<li><p>The file contained several columns that were basically a mystery to the
author, e.g. <code>"Hx"</code>, <code>"Hy"</code>, <code>"Vref"</code>, etc. These were ignored.</p></li>
</ul><p>Based on such considerations, <code>read.cm()</code> reads only the columns that
were reasonably well-understood based on the sample file. Users who need more
columns should contact the author. And a user who could produce a document
explaining the data format would be especially appreciated!</p>
    </div>
    <div id="historical-note">
    <h2>Historical note</h2>
    

<p>Prior to late July, 2016, the direction of current flow was stored in the
return value, but it is no longer stored, since it can be derived from the
<code>u</code> and <code>v</code> values.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other things related to cm data: 
<code><a href="sub-sub-cm-method.html">[[,cm-method</a></code>,
<code>[[&lt;-,cm-method</code>,
<code><a href="as.cm.html">as.cm</a>()</code>,
<code><a href="cm-class.html">cm-class</a></code>,
<code><a href="cm.html">cm</a></code>,
<code><a href="plot-cm-method.html">plot,cm-method</a></code>,
<code><a href="rotateAboutZ.html">rotateAboutZ</a>()</code>,
<code><a href="subset-cm-method.html">subset,cm-method</a></code>,
<code><a href="summary-cm-method.html">summary,cm-method</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Dan Kelley</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/" class="external-link">oce</a></span><span class="op">)</span></span>
<span class="r-in">  <span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="read.oce.html">read.oce</a></span><span class="op">(</span><span class="st">"cm_interocean_0811786.s4a.tab"</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cm</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cm</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

