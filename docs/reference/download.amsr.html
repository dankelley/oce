<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download and Cache an amsr File — download.amsr • oce</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download and Cache an amsr File — download.amsr"><meta property="og:description" content='If the file is already present in destdir, then it is not
downloaded again. The default destdir is the present directory,
but it probably makes more sense to use something like "~/data/amsr"
to make it easy for scripts in other directories to use the cached data.
The file is downloaded with download.file().  Please read the
&amp;#8216;History&amp;#8217; section for important details on how download.amsr()
and also read.amsr() have had be altered over the years, to deal
with changes in the directory structure and file format on the
server from which files are downloaded.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.8-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A_oce.html">1. Introduction to Oce</a>
    </li>
    <li>
      <a href="../articles/B_ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/D_map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/E_flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/F_subclassing.html">6. Subclassing oce objects</a>
    </li>
    <li>
      <a href="../articles/G_altering_defaults.html">7. Altering oce Defaults</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dankelley/oce/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download and Cache an amsr File</h1>
    <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/amsr.R" class="external-link"><code>R/amsr.R</code></a></small>
    <div class="hidden name"><code>download.amsr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>If the file is already present in <code>destdir</code>, then it is not
downloaded again. The default <code>destdir</code> is the present directory,
but it probably makes more sense to use something like <code>"~/data/amsr"</code>
to make it easy for scripts in other directories to use the cached data.
The file is downloaded with <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file()</a></code>.  Please read the
‘History’ section for important details on how <code>download.amsr()</code>
and also <code><a href="read.amsr.html">read.amsr()</a></code> have had be altered over the years, to deal
with changes in the directory structure and file format on the
server from which files are downloaded.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">download.amsr</span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">month</span>,</span>
<span>  <span class="va">day</span>,</span>
<span>  destdir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  server <span class="op">=</span> <span class="st">"https://data.remss.com/amsr2/ocean/L3/v08.2"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"3day"</span>,</span>
<span>  debug <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>year, month, day</dt>
<dd><p>a specification of the desired observation time.
There are 3 choices for this specification.  (a) If <code>year</code> is an object
created by <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code>, then that specifies the time, and so <code>month</code>
and <code>day</code> are ignored.  This scheme can be convenient for creating a
sequence of images, starting at a particular date, because adding 1
to an object of class <code>Date</code> increases the time by 1 day, saving
the user from having to know how many days are in any given month.
(b) If <code>year</code> is an integer, then it is taken to be the year, and
the user must also specify <code>month</code> and <code>day</code>, also integers. (c)
If <code>year</code> is NULL (which is the default), then the focus is set to
the most recent date, but this depends on the value of
<code>type</code> (see next).  If <code>type</code> is <code>"3day"</code>, <code>"daily"</code> or <code>"weekly"</code>,
or just the first two of them if <code>type</code> is <code>"monthly"</code>.  If these
things are provided, then they just match exactly the values in the
sought-after file on the remote server.  If <code>year</code> is NULL, then
<code>download.amsr()</code> constructs a URL that ought to be the most recent
available file: 3 days prior to the present date (if <code>type</code> is
<code>"3day"</code> or <code>"daily"</code>), the Saturday two weeks prior to the
present date (if <code>type</code> is <code>"weekly"</code>), or two months in the
past (if <code>type</code> is <code>"monthly"</code>).</p></dd>


<dt>destdir</dt>
<dd><p>A string naming the directory in which to cache the downloaded file.
The default is to store in the present directory, but many users find it more
helpful to use something like <code>"~/data/amsr"</code> for this, to collect all
downloaded amsr files in one place.</p></dd>


<dt>server</dt>
<dd><p>A string naming the server from which data
are to be acquired. See “History”.</p></dd>


<dt>type</dt>
<dd><p>character value indicating where to get the data.  This may be
<code>"3day"</code> (the default), for a composite covering 3 days of observation, which
removes most viewing-path and cloud blanks, <code>"daily"</code> for a daily reading,
<code>"weekly"</code> for a composite covering a week, or <code>"monthly"</code> for a composite
covering a month.  In the <code>"daily"</code> case, the data arrays are 3D, with the
third dimension representing ascending and descending traces, but in all the
other cases, the arrays are 2D.</p></dd>


<dt>debug</dt>
<dd><p>an integer specifying whether debugging information is
to be printed during the processing. This is a general parameter that
is used by many <code>oce</code> functions. Generally, setting <code>debug=0</code>
turns off the printing, while higher values suggest that more information
be printed. If one function calls another, it usually reduces the value of
<code>debug</code> first, so that a user can often obtain deeper debugging
by specifying higher <code>debug</code> values.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>download.amsr</code> returns a character value holding the full pathname
of the downloaded file.</p>
    </div>
    <div id="history">
    <h2>History</h2>
    

<p>Until 25 March 2017, the default server was
<code>"ftp.ssmi.com/amsr2/bmaps_v07.2"</code>, but this was changed when the author
discovered that this FTP site had been changed to require users to create
accounts to register for downloads.  The default was changed to
<code>"http://data.remss.com/amsr2/bmaps_v07.2"</code> on the named date.
This site was found by a web search, but it seems to provide proper data.
It is assumed that users will do some checking on the best source.</p>
<p>On 23 January 2018, it was noticed that the server-url naming convention
had changed, e.g.
<code>http://data.remss.com/amsr2/bmaps_v07.2/y2017/m01/f34_20170114v7.2.gz</code>
becoming
<code>http://data.remss.com/amsr2/bmaps_v08/y2017/m01/f34_20170114v8.gz</code></p>
<p>On 26 July 2023, it was noticed that the server-url naming convention
had changed again, requiring not only the alteration of the default
<code>server</code> value but also the addition of a new parameter named <code>type</code>.
Worse yet -- much worse -- the file format is now changed from a gzipped
format to a NetCDF format, and this will require a complete rewriting
of <code><a href="read.amsr.html">read.amsr()</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other functions that download files: 
<code><a href="download.coastline.html">download.coastline</a>()</code>,
<code><a href="download.met.html">download.met</a>()</code>,
<code><a href="download.topo.html">download.topo</a>()</code></p>
<p>Other functions that plot oce data: 
<code><a href="plot-adp-method.html">plot,adp-method</a></code>,
<code><a href="plot-adv-method.html">plot,adv-method</a></code>,
<code><a href="plot-amsr-method.html">plot,amsr-method</a></code>,
<code><a href="plot-argo-method.html">plot,argo-method</a></code>,
<code><a href="plot-bremen-method.html">plot,bremen-method</a></code>,
<code><a href="plot-cm-method.html">plot,cm-method</a></code>,
<code><a href="plot-coastline-method.html">plot,coastline-method</a></code>,
<code><a href="plot-ctd-method.html">plot,ctd-method</a></code>,
<code><a href="plot-gps-method.html">plot,gps-method</a></code>,
<code><a href="plot-ladp-method.html">plot,ladp-method</a></code>,
<code><a href="plot-landsat-method.html">plot,landsat-method</a></code>,
<code><a href="plot-lisst-method.html">plot,lisst-method</a></code>,
<code><a href="plot-lobo-method.html">plot,lobo-method</a></code>,
<code><a href="plot-met-method.html">plot,met-method</a></code>,
<code><a href="plot-odf-method.html">plot,odf-method</a></code>,
<code><a href="plot-rsk-method.html">plot,rsk-method</a></code>,
<code><a href="plot-satellite-method.html">plot,satellite-method</a></code>,
<code><a href="plot-sealevel-method.html">plot,sealevel-method</a></code>,
<code><a href="plot-section-method.html">plot,section-method</a></code>,
<code><a href="plot-tidem-method.html">plot,tidem-method</a></code>,
<code><a href="plot-topo-method.html">plot,topo-method</a></code>,
<code><a href="plot-windrose-method.html">plot,windrose-method</a></code>,
<code><a href="plot-xbt-method.html">plot,xbt-method</a></code>,
<code><a href="plotProfile.html">plotProfile</a>()</code>,
<code><a href="plotScan.html">plotScan</a>()</code>,
<code><a href="plotTS.html">plotTS</a>()</code>,
<code><a href="tidem-class.html">tidem-class</a></code></p>
<p>Other things related to amsr data: 
<code><a href="sub-sub-amsr-method.html">[[,amsr-method</a></code>,
<code>[[&lt;-,amsr-method</code>,
<code><a href="amsr-class.html">amsr-class</a></code>,
<code><a href="amsr.html">amsr</a></code>,
<code><a href="composite-amsr-method.html">composite,amsr-method</a></code>,
<code><a href="plot-amsr-method.html">plot,amsr-method</a></code>,
<code><a href="read.amsr.html">read.amsr</a>()</code>,
<code><a href="subset-amsr-method.html">subset,amsr-method</a></code>,
<code><a href="summary-amsr-method.html">summary,amsr-method</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Dan Kelley</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># The download may take up to about a minute.</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">download.amsr</span><span class="op">(</span><span class="fl">2023</span>, <span class="fl">7</span>, <span class="fl">27</span>, destdir<span class="op">=</span><span class="st">"~/data/amsr"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="read.amsr.html">read.amsr</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html" class="external-link">mtext</a></span><span class="op">(</span><span class="va">d</span><span class="op">[[</span><span class="st">"filename"</span><span class="op">]</span><span class="op">]</span>, side<span class="op">=</span><span class="fl">3</span>, line<span class="op">=</span><span class="fl">0</span>, adj<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

