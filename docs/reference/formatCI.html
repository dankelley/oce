<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Format a Confidence Interval — formatCI • oce</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Format a Confidence Interval — formatCI"><meta property="og:description" content="This formats a confidence interval in either the +/- notation or
the parenthetic notation.  For example, if a quantity has mean 1
with uncertainty 0.05, which means a CI of 0.95 to 1.05,
the &quot;+-&quot; style yields &quot;1+/-0.05&quot;, and the &quot;parentheses&quot;
style yields `&quot;&quot;'."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.8-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A_oce.html">1. Introduction to Oce</a>
    </li>
    <li>
      <a href="../articles/B_ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/D_map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/E_flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/F_subclassing.html">6. Subclassing oce objects</a>
    </li>
    <li>
      <a href="../articles/G_altering_defaults.html">7. Altering oce Defaults</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dankelley/oce/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Format a Confidence Interval</h1>
    <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/misc.R" class="external-link"><code>R/misc.R</code></a></small>
    <div class="hidden name"><code>formatCI.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This formats a confidence interval in either the +/- notation or
the parenthetic notation.  For example, if a quantity has mean 1
with uncertainty 0.05, which means a CI of 0.95 to 1.05,
the <code>"+-"</code> style yields <code>"1+/-0.05"</code>, and the <code>"parentheses"</code>
style yields `""'.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">formatCI</span><span class="op">(</span></span>
<span>  <span class="va">ci</span>,</span>
<span>  style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"+/-"</span>, <span class="st">"parentheses"</span><span class="op">)</span>,</span>
<span>  <span class="va">model</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceDebug"</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ci</dt>
<dd><p>optional vector of length 2 or 3.</p></dd>


<dt>style</dt>
<dd><p>string indicating notation to be used.</p></dd>


<dt>model</dt>
<dd><p>optional regression model, e.g. returned by <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> or
<code><a href="https://rdrr.io/r/stats/nls.html" class="external-link">nls()</a></code>.</p></dd>


<dt>digits</dt>
<dd><p>optional number of digits to use.  This is ignored
if <code>style</code> is <code>"parentheses"</code>.</p></dd>


<dt>debug</dt>
<dd><p>integer value indicating debugging level. If 0, then
<code>formatCI()</code> works silently.  If greater than 0, then some debugging
messages are printed during processing.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>If <code>ci</code> is given, the result is a character string with the
estimate and its uncertainty, in plus/minus or parenthetic notation.  If
<code>model</code> is given, the result is a 1-column matrix holding character
strings, with row names corresponding to the parameters of the model.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If a <code>model</code> is given, then <code>ci</code> is ignored, and a confidence
interval is calculated using <code><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint()</a></code> with <code>level</code> set to
0.6914619.  This <code>level</code> corresponds to a range of plus or minus one
standard deviation, for the t distribution and a large number of degrees of
freedom (since <code>qt(0.6914619, 100000)</code> is 0.5).</p>
<p>If <code>model</code> is missing, <code>ci</code> must be provided.  If it contains 3
elements, then first and third elements are taken as the range of the
confidence interval (which by convention should use the <code>level</code> stated
in the previous paragraph), and the second element is taken as the central
value.  Alternatively, if <code>ci</code> has 2 elements, they are taken to be
bounds of the confidence interval and their mean is taken to be the central
value.</p>
<p>In the <code>+/-</code> notation, e.g. \(a \pm b\) indicates that the true
value lies between \(a-b\) and \(a+b\) with a high degree of
certainty.  Mills et al. (1993, section 4.1 on page 83) suggest that
\(b\) should be set equal to 2 times the standard uncertainty or
standard deviation.  JCGM (2008, section 7.2.2 on pages 25 and 26), however,
suggest that \(b\) should be set to the standard uncertainty, while
also recommending that the \(\pm\) notation (and presumably
the parentheses notation also) be avoided altogether, in favour of
writing sentences that explains uncertainties in clear terms.</p>
<p>The <code>parentheses</code> notation is often called the compact notation.  In
it, the digits in parentheses indicate the uncertainty in the corresponding
digits to their left, e.g. 12.34(3) means that the last digit (4) has an
uncertainty of 3.  However, as with the \(\pm\) notation, different
authorities offer different advice on defining this uncertainty; Mills et
al. (1993) provide an example in which the
parenthetic value is half the \(\pm\) value, whereas
JCM (2008) suggest using the same values.</p>
<p>The JCM(2008) convention is used by <code>formatCI()</code> for the parentheses
notation, as illustrated in Examples 1 and 2.  Note, however, that
if the confidence range exceeds the value, then
a request for <code>parentheses</code> format reverts to <code>+/-</code> format.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ol><li><p>JCGM, 2008. <em>Evaluation of measurement data - Guide to the
expression of uncertainty in measurement (JCGM 100:2008)</em>, published by the
Joint Committee for Guides in Metrology, available (as of November 2023)
at https://www.bipm.org/documents/20126/2071204/JCGM_100_2008_E.pdf.
See section 7.2.2 on Page 25, for a summary of notation, including
an illustration of the use of equal values for both the <code>+-</code> and the
parentheses notations.</p></li>
<li><p>Mills, I., T. Cvitas, K. Homann, N. Kallay, and K. Kuchitsu, 1993.
<em>Quantities, Units and Symbols in Physical Chemistry</em>, published
Blackwell Science for the International Union of Pure and Applied Chemistry.
(See section 4.1, page 83, for a summary of notation, which shows that a
value to the right of a <code>+-</code> sign is to be halved if put in
in parentheses, which is not done in the present function, because
of a choice to follow the recommendation of reference 1.</p></li>
</ol></div>
    <div id="author">
    <h2>Author</h2>
    <p>Dan Kelley</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/" class="external-link">oce</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: mean=1, uncertainty=0.05, in +/- notation.</span></span></span>
<span class="r-in"><span><span class="fu">formatCI</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">1.05</span><span class="op">)</span><span class="op">)</span> <span class="co"># "1+/-0.05"</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1+/-0.05"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: save mean and uncertainty, but in parentheses notation.</span></span></span>
<span class="r-in"><span><span class="fu">formatCI</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">1.05</span><span class="op">)</span>, style <span class="op">=</span> <span class="st">"parentheses"</span><span class="op">)</span> <span class="co"># "1.00(5)"</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1.00(5)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example 3: using t.test to find a CI.</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span>, mean <span class="op">=</span> <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">$</span><span class="va">conf.int</span></span></span>
<span class="r-in"><span><span class="fu">formatCI</span><span class="op">(</span><span class="va">CI</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "9.9+/-0.19"</span>
<span class="r-in"><span><span class="fu">formatCI</span><span class="op">(</span><span class="va">CI</span>, style <span class="op">=</span> <span class="st">"parentheses"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "9.9(1.87)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example 4: specifying a model</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">x</span>, sd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">formatCI</span><span class="op">(</span>model <span class="op">=</span> <span class="va">m</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             value       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept) "2+/-0.021" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x           "3+/-0.0036"</span>
<span class="r-in"><span><span class="fu">formatCI</span><span class="op">(</span>model <span class="op">=</span> <span class="va">m</span>, style <span class="op">=</span> <span class="st">"parentheses"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             value        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept) "1.97(2.11)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x           "3.005(3.64)"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

