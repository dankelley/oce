<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Replace Parts of a ctd Object — [[&lt;-,ctd-method • oce</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Replace Parts of a ctd Object — [[&lt;-,ctd-method"><meta property="og:description" content="The [[&amp;lt;- method works for all oce objects.
The purpose, as with the related extraction method, [[,
is to insulate users from the internal details of oce
objects, by looking for items within the various storage
slots of the object. Items not actually stored can also be
replaced, including units and data-quality
flags."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.8-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A_oce.html">1. Introduction to Oce</a>
    </li>
    <li>
      <a href="../articles/B_ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/D_map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/E_flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/F_subclassing.html">6. Subclassing oce objects</a>
    </li>
    <li>
      <a href="../articles/G_altering_defaults.html">7. Altering oce Defaults</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dankelley/oce/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Replace Parts of a ctd Object</h1>
    <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/ctd.R" class="external-link"><code>R/ctd.R</code></a></small>
    <div class="hidden name"><code>sub-subset-ctd-method.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>[[&lt;-</code> method works for all <a href="oce-class.html">oce</a> objects.
The purpose, as with the related extraction method, <code>[[</code>,
is to insulate users from the internal details of <a href="oce-class.html">oce</a>
objects, by looking for items within the various storage
slots of the object. Items not actually stored can also be
replaced, including units and data-quality
flags.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre><code># S4 method for ctd
[[(x, i, j, ...) &lt;- value</code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a <a href="ctd-class.html">ctd</a> object.</p></dd>


<dt>i</dt>
<dd><p>character value naming the item to replace.</p></dd>


<dt>j</dt>
<dd><p>optional additional information on the <code>i</code> item.</p></dd>


<dt>...</dt>
<dd><p>optional additional information (ignored).</p></dd>


<dt>value</dt>
<dd><p>The value to be placed into <code>x</code>, somewhere.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>As with <code>[[</code> method, the procedure works in steps.</p>
<p>First, the <code>metadata</code> slot of <code>x</code> is checked to
see whether it contains something named with <code>i</code>.
If so, then the named item is replaced with <code>value</code>.</p>
<p>Otherwise, if the string value of <code>i</code> ends in <code>Unit</code>, then the
characters preceding that are taken as the name of a variable, and
the <code>metadata</code> slot of <code>x</code> is updated to store that unit, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>x[[<span class="st">"temperatureUnits"</span>]] <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">unit=</span><span class="fu">expression</span>(degree<span class="sc">*</span>F),<span class="at">scale=</span><span class="st">""</span>)</span></code></pre><p></p></div>
<p>Similarly, if <code>i</code> ends in <code>Flag</code>, then quality-control
flags are set up as defined by <code>result</code>, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>o[[<span class="st">"temperatureFlags"</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span></code></pre><p></p></div>
<p>Otherwise, <code><a href="https://rdrr.io/r/base/pmatch.html" class="external-link">pmatch()</a></code> is used for a partial-string match with
the names of the items that are in the <code>data</code> slot of <code>x</code>.
The first item found (if any) is then updated to hold the value <code>result</code>.</p>
<p>If none of these conditions is met, a warning is issued.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other functions that replace parts of oce objects: 
<code>[[&lt;-,adp-method</code>,
<code>[[&lt;-,amsr-method</code>,
<code>[[&lt;-,argo-method</code>,
<code>[[&lt;-,bremen-method</code>,
<code>[[&lt;-,cm-method</code>,
<code>[[&lt;-,coastline-method</code>,
<code>[[&lt;-,echosounder-method</code>,
<code>[[&lt;-,g1sst-method</code>,
<code>[[&lt;-,gps-method</code>,
<code>[[&lt;-,ladp-method</code>,
<code>[[&lt;-,landsat-method</code>,
<code>[[&lt;-,lisst-method</code>,
<code>[[&lt;-,lobo-method</code>,
<code>[[&lt;-,met-method</code>,
<code>[[&lt;-,oce-method</code>,
<code>[[&lt;-,odf-method</code>,
<code>[[&lt;-,rsk-method</code>,
<code>[[&lt;-,sealevel-method</code>,
<code>[[&lt;-,section-method</code>,
<code>[[&lt;-,tidem-method</code>,
<code>[[&lt;-,topo-method</code>,
<code>[[&lt;-,windrose-method</code>,
<code>[[&lt;-,xbt-method</code></p>
<p>Other things related to ctd data: 
<code><a href="CTD_BCD2014666_008_1_DN.ODF.gz.html">CTD_BCD2014666_008_1_DN.ODF.gz</a></code>,
<code><a href="sub-sub-ctd-method.html">[[,ctd-method</a></code>,
<code><a href="as.ctd.html">as.ctd</a>()</code>,
<code><a href="cnvName2oceName.html">cnvName2oceName</a>()</code>,
<code><a href="ctd-class.html">ctd-class</a></code>,
<code><a href="ctd.cnv.gz.html">ctd.cnv.gz</a></code>,
<code><a href="ctdDecimate.html">ctdDecimate</a>()</code>,
<code><a href="ctdFindProfilesRBR.html">ctdFindProfilesRBR</a>()</code>,
<code><a href="ctdFindProfiles.html">ctdFindProfiles</a>()</code>,
<code><a href="ctdRaw.html">ctdRaw</a></code>,
<code><a href="ctdRepair.html">ctdRepair</a>()</code>,
<code><a href="ctdTrim.html">ctdTrim</a>()</code>,
<code><a href="ctd_aml.csv.gz.html">ctd_aml.csv.gz</a></code>,
<code><a href="ctd.html">ctd</a></code>,
<code><a href="d200321-001.ctd.gz.html">d200321-001.ctd.gz</a></code>,
<code><a href="d201211_0011.cnv.gz.html">d201211_0011.cnv.gz</a></code>,
<code><a href="handleFlags-ctd-method.html">handleFlags,ctd-method</a></code>,
<code><a href="initialize-ctd-method.html">initialize,ctd-method</a></code>,
<code><a href="initializeFlagScheme-ctd-method.html">initializeFlagScheme,ctd-method</a></code>,
<code><a href="oceNames2whpNames.html">oceNames2whpNames</a>()</code>,
<code><a href="oceUnits2whpUnits.html">oceUnits2whpUnits</a>()</code>,
<code><a href="plot-ctd-method.html">plot,ctd-method</a></code>,
<code><a href="plotProfile.html">plotProfile</a>()</code>,
<code><a href="plotScan.html">plotScan</a>()</code>,
<code><a href="plotTS.html">plotTS</a>()</code>,
<code><a href="read.ctd.aml.html">read.ctd.aml</a>()</code>,
<code><a href="read.ctd.itp.html">read.ctd.itp</a>()</code>,
<code><a href="read.ctd.odf.html">read.ctd.odf</a>()</code>,
<code><a href="read.ctd.odv.html">read.ctd.odv</a>()</code>,
<code><a href="read.ctd.sbe.html">read.ctd.sbe</a>()</code>,
<code><a href="read.ctd.ssda.html">read.ctd.ssda</a>()</code>,
<code><a href="read.ctd.woce.other.html">read.ctd.woce.other</a>()</code>,
<code><a href="read.ctd.woce.html">read.ctd.woce</a>()</code>,
<code><a href="read.ctd.html">read.ctd</a>()</code>,
<code><a href="setFlags-ctd-method.html">setFlags,ctd-method</a></code>,
<code><a href="subset-ctd-method.html">subset,ctd-method</a></code>,
<code><a href="summary-ctd-method.html">summary,ctd-method</a></code>,
<code><a href="woceNames2oceNames.html">woceNames2oceNames</a>()</code>,
<code><a href="woceUnit2oceUnit.html">woceUnit2oceUnit</a>()</code>,
<code><a href="write.ctd.html">write.ctd</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ctd</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ctd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CTD Summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Instrument:          SBE 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Temp. serial no.:    1140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Cond. serial no.:    832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * File:                "/Users/kelley/git/oce/create_data/ctd/ctd.cnv"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Original file:       c:\seasoft3\basin\bed0302.hex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Start time:          2003-10-15 15:38:38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Sample interval:     1 s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Cruise:              Halifax Harbour</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Vessel:              Divcom3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Station:             Stn 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Mean Location:       44.684N 63.644W</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Data Overview</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                 Min.   Mean   Max. Dim. NAs OriginalName</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     scan                         130    220    310  181   0         scan</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     timeS [s]                    129    219    309  181   0        timeS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     pressure [dbar]             1.48 22.885 44.141  181   0           pr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     depth [m]                  1.468 22.698 43.778  181   0         depS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     temperature [°C, IPTS-68]  2.919 7.5063 14.237  181   0         t068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     salinity [PSS-78]         29.916 31.219 31.498  181   0        sal00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     flag                           0      0      0  181   0         flag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Processing Log</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 2018-11-14 20:03:47 UTC: `create 'ctd' object`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 2018-11-14 20:03:47 UTC: `read.ctd.sbe(file = file, debug = 10, processingLog = processingLog)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 2018-11-14 20:03:47 UTC: `oce.edit(x = ctd, item = "startTime", value = as.POSIXct(gsub("1903",     "2003", format(ctd[["startTime"]])), tz = "UTC") + 4 * 3600,     reason = "file had year=1903, instead of 2003", person = "Dan Kelley")`</span>
<span class="r-in"><span><span class="co"># Move the CTD profile a nautical mile north.</span></span></span>
<span class="r-in"><span><span class="va">ctd</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">60</span> <span class="op">+</span> <span class="va">ctd</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span> <span class="co"># acts in metadata</span></span></span>
<span class="r-in"><span><span class="co"># Increase the salinity by 0.01.</span></span></span>
<span class="r-in"><span><span class="va">ctd</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.01</span> <span class="op">+</span> <span class="va">ctd</span><span class="op">[[</span><span class="st">"salinity"</span><span class="op">]</span><span class="op">]</span> <span class="co"># acts in data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ctd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CTD Summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Instrument:          SBE 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Temp. serial no.:    1140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Cond. serial no.:    832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * File:                "/Users/kelley/git/oce/create_data/ctd/ctd.cnv"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Original file:       c:\seasoft3\basin\bed0302.hex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Start time:          2003-10-15 15:38:38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Sample interval:     1 s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Cruise:              Halifax Harbour</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Vessel:              Divcom3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Station:             Stn 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Mean Location:       44.701N 63.644W</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Data Overview</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                 Min.   Mean   Max. Dim. NAs OriginalName</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     scan                         130    220    310  181   0         scan</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     timeS [s]                    129    219    309  181   0        timeS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     pressure [dbar]             1.48 22.885 44.141  181   0           pr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     depth [m]                  1.468 22.698 43.778  181   0         depS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     temperature [°C, IPTS-68]  2.919 7.5063 14.237  181   0         t068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     salinity [PSS-78]         29.926 31.229 31.508  181   0        sal00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     flag                           0      0      0  181   0         flag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Processing Log</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 2018-11-14 20:03:47 UTC: `create 'ctd' object`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 2018-11-14 20:03:47 UTC: `read.ctd.sbe(file = file, debug = 10, processingLog = processingLog)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 2018-11-14 20:03:47 UTC: `oce.edit(x = ctd, item = "startTime", value = as.POSIXct(gsub("1903",     "2003", format(ctd[["startTime"]])), tz = "UTC") + 4 * 3600,     reason = "file had year=1903, instead of 2003", person = "Dan Kelley")`</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

