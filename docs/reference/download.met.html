<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download and Cache a met File — download.met • oce</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Download and Cache a met File — download.met" />
<meta property="og:description" content="Data are downloaded from the Environment Canada's historical data
website and cached locally." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/oce.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/subclassing.html">6. Subclassing oce objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dankelley/oce/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download and Cache a met File</h1>
    <small class="dont-index">Source: <a href='https://github.com/dankelley/oce/blob/master/R/met.R'><code>R/met.R</code></a></small>
    <div class="hidden name"><code>download.met.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Data are downloaded from the Environment Canada's historical data
website and cached locally.</p>
    </div>

    <pre class="usage"><span class='fu'>download.met</span>(
  <span class='no'>id</span>,
  <span class='no'>year</span>,
  <span class='no'>month</span>,
  <span class='no'>deltat</span>,
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"xml"</span>,
  <span class='kw'>destdir</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='no'>destfile</span>,
  <span class='kw'>force</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>debug</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"oceDebug"</span>)
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>A number giving the "Station ID" of the station of interest. If not
provided, <code>id</code> defaults to 6358, for Halifax International Airport. See
&#8220;Details&#8221;.</p></td>
    </tr>
    <tr>
      <th>year</th>
      <td><p>A number giving the year of interest. Ignored unless <code>deltat</code>
is <code>"hour"</code>. If <code>year</code> is not given, it defaults to the present year.</p></td>
    </tr>
    <tr>
      <th>month</th>
      <td><p>A number giving the month of interest. Ignored unless <code>deltat</code>
is <code>"hour"</code>. If <code>month</code> is not given, it defaults to the present
month.</p></td>
    </tr>
    <tr>
      <th>deltat</th>
      <td><p>Optional character string indicating the time step of the
desired dataset. This may be <code>"hour"</code> or <code>"month"</code>.
If <code>deltat</code> is not given, it defaults to <code>"hour"</code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>String indicating which type of file to download, either
<code>"xml"</code> (the default) for an XML file or <code>"csv"</code> for a CSV file.</p></td>
    </tr>
    <tr>
      <th>destdir</th>
      <td><p>Optional string indicating the directory in which to store
downloaded files. If not supplied, <code>"."</code> is used, i.e. the data file
is stored in the present working directory.</p></td>
    </tr>
    <tr>
      <th>destfile</th>
      <td><p>Optional string indicating the name of the file.
If not supplied, the file name is constructed from the other
parameters of the function call, so subsequent calls with the same
parameters will yield the same result, thus providing the key
to the caching scheme.</p></td>
    </tr>
    <tr>
      <th>force</th>
      <td><p>Logical value indicating whether to force a download, even
if the file already exists locally.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical value passed to <code><a href='https://rdrr.io/r/utils/download.file.html'>download.file()</a></code>; a <code>TRUE</code> value
silences output.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>an integer specifying whether debugging information is
to be printed during the processing. This is a general parameter that
is used by many <code>oce</code> functions. Generally, setting <code>debug=0</code>
turns off the printing, while higher values suggest that more information
be printed. If one function calls another, it usually reduces the value of
<code>debug</code> first, so that a user can often obtain deeper debugging
by specifying higher <code>debug</code> values.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>String indicating the full pathname to the downloaded file.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The data are downloaded from
<a href='https://climate.weather.gc.ca/historical_data/search_historic_data_e.html'>https://climate.weather.gc.ca/historical_data/search_historic_data_e.html</a>
using <code><a href='https://rdrr.io/r/utils/download.file.html'>utils::download.file()</a></code>
pointed to the Environment Canada website (reference 1)
using queries that had to be devised by reverse-engineering, since the agency
does not provide documentation about how to construct queries. Caution: the
query format changes from time to time, so <code>download.met()</code> may work one
day, and fail the next.</p>
<p>The constructed query contains Station ID, as provided in the <code>id</code> argument.
Note that this seems to be a creation of Environment Canada, alone;
it is distinct from the more standard "Climate ID" and "WMO ID".
To make things more difficult, Environment Canada states that the
Station ID is subject to change over time. (Whether this applies to existing
data is unclear.)</p>
<p>Given these difficulties with Station ID, users are advised to consult
the Environment Canada website (reference 1) before downloading any data,
and to check it from time to time
during the course of a research project, to see if the Station ID has changed.
Another approach would be to use Gavin Simpson's
<code>canadaHCD</code> package (reference 2) to look up Station IDs. This package maintains
a copy of the Environment Canada listing of stations, and its
<code>find_station</code> function provides an easy way to determine Station IDs.
After that, its <code>hcd_hourly</code> function (and related functions) make
it easy to read data. These data can then be converted to the
<code>met</code> class with <code><a href='as.met.html'>as.met()</a></code>, although doing so leaves
many important metadata blank.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ol>
<li><p>Environment Canada website for Historical Climate Data
<a href='http://climate.weather.gc.ca/index_e.html'>http://climate.weather.gc.ca/index_e.html</a></p></li>
<li><p>Gavin Simpson's <code>canadaHCD</code> package on GitHub
<a href='https://github.com/gavinsimpson/canadaHCD'>https://github.com/gavinsimpson/canadaHCD</a></p></li>
</ol>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>The work is done with <code><a href='https://rdrr.io/r/utils/download.file.html'>utils::download.file()</a></code>.</p>
<p>Other functions that download files: 
<code><a href='download.amsr.html'>download.amsr</a>()</code>,
<code><a href='download.coastline.html'>download.coastline</a>()</code>,
<code><a href='download.topo.html'>download.topo</a>()</code></p>
<p>Other things related to met data: 
<code><a href='sub-sub-met-method.html'>[[,met-method</a></code>,
<code>[[&lt;-,met-method</code>,
<code><a href='as.met.html'>as.met</a>()</code>,
<code><a href='met-class.html'>met-class</a></code>,
<code><a href='met.html'>met</a></code>,
<code><a href='plot-met-method.html'>plot,met-method</a></code>,
<code><a href='read.met.html'>read.met</a>()</code>,
<code><a href='subset-met-method.html'>subset,met-method</a></code>,
<code><a href='summary-met-method.html'>summary,met-method</a></code>,
<code><a href='test_met_csv1.csv.html'>test_met_csv1.csv</a></code>,
<code><a href='test_met_csv2.csv.html'>test_met_csv2.csv</a></code>,
<code><a href='test_met_xml2.xml.html'>test_met_xml2.xml</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>oce</span>)
<span class='co'>## Download data for Halifax International Airport, in September</span>
<span class='co'>## of 2003. (This dataset is used for data(met) provided with oce.)</span>
<span class='no'>metFile</span> <span class='kw'>&lt;-</span> <span class='fu'>download.met</span>(<span class='fl'>6358</span>, <span class='fl'>2003</span>, <span class='fl'>9</span>, <span class='kw'>destdir</span><span class='kw'>=</span><span class='st'>"."</span>)
<span class='no'>met</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='read.met.html'>read.met</a></span>(<span class='no'>metFile</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


