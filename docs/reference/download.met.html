<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download and Cache a met File — download.met • oce</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download and Cache a met File — download.met"><meta name="description" content="download.met() attempts to download data from Environment Canada's
historical-data website, and to cache the files locally. Lacking a published
API, this function must rely on reverse-engineering of queries handled by
that web server.  For that reason, it is brittle."><meta property="og:description" content="download.met() attempts to download data from Environment Canada's
historical-data website, and to cache the files locally. Lacking a published
API, this function must rely on reverse-engineering of queries handled by
that web server.  For that reason, it is brittle."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oce</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8-4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/A_oce.html">1. Introduction to Oce</a></li>
    <li><a class="dropdown-item" href="../articles/B_ctd.html">2. Analysis of CTD data</a></li>
    <li><a class="dropdown-item" href="../articles/C_adp.html">3. Analysis of acoustic-Doppler data</a></li>
    <li><a class="dropdown-item" href="../articles/D_map_projections.html">4. Using map projections</a></li>
    <li><a class="dropdown-item" href="../articles/E_flags.html">5. Dealing with data-quality flags</a></li>
    <li><a class="dropdown-item" href="../articles/F_subclassing.html">6. Subclassing oce objects</a></li>
    <li><a class="dropdown-item" href="../articles/G_altering_defaults.html">7. Altering oce Defaults</a></li>
    <li><a class="dropdown-item" href="../articles/H_tides.html">8. Tidal Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dankelley/oce/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Download and Cache a met File</h1>
      <small class="dont-index">Source: <a href="https://github.com/dankelley/oce/blob/HEAD/R/met.R" class="external-link"><code>R/met.R</code></a></small>
      <div class="d-none name"><code>download.met.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>download.met()</code> attempts to download data from Environment Canada's
historical-data website, and to cache the files locally. Lacking a published
API, this function must rely on reverse-engineering of queries handled by
that web server.  For that reason, it is brittle.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">download.met</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">year</span>,</span>
<span>  <span class="va">month</span>,</span>
<span>  <span class="va">deltat</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"xml"</span>,</span>
<span>  destdir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  <span class="va">destfile</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"oceDebug"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A number giving the "Station ID" of the station of interest. If not
provided, <code>id</code> defaults to 6358, for Halifax International Airport. See
“Details”.</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>A number giving the year of interest. Ignored unless <code>deltat</code>
is <code>"hour"</code>. If <code>year</code> is not given, it defaults to the present year.</p></dd>


<dt id="arg-month">month<a class="anchor" aria-label="anchor" href="#arg-month"></a></dt>
<dd><p>A number giving the month of interest. Ignored unless <code>deltat</code>
is <code>"hour"</code>. If <code>month</code> is not given, it defaults to the present
month.</p></dd>


<dt id="arg-deltat">deltat<a class="anchor" aria-label="anchor" href="#arg-deltat"></a></dt>
<dd><p>Optional character string indicating the time step of the
desired dataset. This may be <code>"hour"</code> or <code>"month"</code>.
If <code>deltat</code> is not given, it defaults to <code>"hour"</code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>String indicating which type of file to download, either
<code>"xml"</code> (the default) for an XML file or <code>"csv"</code> for a CSV file.</p></dd>


<dt id="arg-destdir">destdir<a class="anchor" aria-label="anchor" href="#arg-destdir"></a></dt>
<dd><p>Optional string indicating the directory in which to store
downloaded files. If not supplied, <code>"."</code> is used, i.e. the data file
is stored in the present working directory.</p></dd>


<dt id="arg-destfile">destfile<a class="anchor" aria-label="anchor" href="#arg-destfile"></a></dt>
<dd><p>Optional string indicating the name of the file.
If not supplied, the file name is constructed from the other
parameters of the function call, so subsequent calls with the same
parameters will yield the same result, thus providing the key
to the caching scheme.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>Logical value indicating whether to force a download, even
if the file already exists locally.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical value passed to <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file()</a></code>; a <code>TRUE</code> value
silences output.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>an integer specifying whether debugging information is
to be printed during the processing. This is a general parameter that
is used by many <code>oce</code> functions. Generally, setting <code>debug=0</code>
turns off the printing, while higher values suggest that more information
be printed. If one function calls another, it usually reduces the value of
<code>debug</code> first, so that a user can often obtain deeper debugging
by specifying higher <code>debug</code> values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>String indicating the full pathname to the downloaded file.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If this function fails, users might try using Gavin Simpson's <code>canadaHCD</code>
package (reference 2). This package maintains a copy of the Environment
Canada listing of stations, and its <code>find_station()</code> function provides an easy
way to determine Station IDs.  After that, its <code>hcd_hourly</code> function (and
related functions) make it easy to read data. These data can then be
converted to the <code>met</code> class with <code><a href="as.met.html">as.met()</a></code>, although doing so leaves many
important metadata blank.</p>
    </div>
    <div class="section level2">
    <h2 id="sample-of-usage">Sample of Usage<a class="anchor" aria-label="anchor" href="#sample-of-usage"></a></h2>


<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/">oce</a></span><span class="op">)</span></span>
<span><span class="co"># Download data for Halifax International Airport, in September</span></span>
<span><span class="co"># of 2003. This dataset is used for data(met) provided with oce.</span></span>
<span><span class="co"># Note that requests for data after 2012 month 10 yield all</span></span>
<span><span class="co"># missing values, for reasons unknown to the author.</span></span>
<span><span class="va">metFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download.met.html">download.met</a></span><span class="op">(</span><span class="fl">6358</span>, <span class="fl">2003</span>, <span class="fl">9</span>, destdir<span class="op">=</span><span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">met</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.met.html">read.met</a></span><span class="op">(</span><span class="va">metFile</span><span class="op">)</span></span></code></pre></div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ol><li><p>Environment Canada website for Historical Climate Data
<code>https://climate.weather.gc.ca/index_e.html</code></p></li>
<li><p>Gavin Simpson's <code>canadaHCD</code> package on GitHub
<code>https://github.com/gavinsimpson/canadaHCD</code></p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The work is done with <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">utils::download.file()</a></code>.</p>
<p>Other functions that download files:
<code><a href="download.amsr.html">download.amsr</a>()</code>,
<code><a href="download.coastline.html">download.coastline</a>()</code>,
<code><a href="download.topo.html">download.topo</a>()</code></p>
<p>Other things related to met data:
<code><a href="sub-sub-met-method.html">[[,met-method</a></code>,
<code>[[&lt;-,met-method</code>,
<code><a href="as.met.html">as.met</a>()</code>,
<code><a href="met.html">met</a></code>,
<code><a href="met-class.html">met-class</a></code>,
<code><a href="plot-met-method.html">plot,met-method</a></code>,
<code><a href="read.met.html">read.met</a>()</code>,
<code><a href="subset-met-method.html">subset,met-method</a></code>,
<code><a href="summary-met-method.html">summary,met-method</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dan Kelley</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

